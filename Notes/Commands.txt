==================================== Intro ======================================================

Lihat command docker:
docker help

Disediakan dari official docker untuk belajar dan uji coba:
docker run hello-world
docker run hello-world:latest
(Pull ke image langsung sekaligus buat containernya dan menjalankannya)

======================================= ENVIRONMENT VARIABLE ==============================================

Menciptakan container dengan ENVIRONMENT variable
docker container create --name java-docker -p 8080:8080 -e NAME=Contoh java-docker:1.0
docker container create --name app2 -p 8083:8080 NAME=Contoh app-golang:1.0
(NAME=Contoh, adalah contoh environment variablenya)

Meng-inspect dan melihat ENV VARIABLE pada container yang sedang jalan
docker container inspect app1
[
	{
		"Config": {
			"Env": [
        "NAME=Contoh",
        "PATH=/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
        "GOLANG_VERSION=1.25.6",
        "GOTOOLCHAIN=local",
        "GOPATH=/go"
			],
		}
	}
]

Multiple environment variables
docker container create --name app3 -p 8084:8080 -e NAME=Docker -e APP=Java -e PASSWORD=rahasia app-golang:1.0

nama container akan menjadi pengganti IP Addressnya ketika melakukan implementasi
docker container create 
	--name java-docker -p 8080:8080
	-e NAME=Docker 
	-e MONGO_HOST=mongo -e MONGO_PORT=27017
	-e REDIS_HOST=redis -e REDIS_PORT=6379
	java-docker:1.0

jadi koneksi ke mongo adalah mongo:27017 dan ke redis adalah redis:6379

==================================== Network and Compose ==========================================

Tapi antar container belum bisa berkomunikasi satu sama lain, terkecuali kita kelompokan mereka ke dalam network yang sama.

Melihat ada commands apa saja pada network:
docker network --help

Melihat semua network
docker network ls

Membuat network baru
docker network create golang_network

Menambahkan container ke existing network;
docker network connect golang_network app1
docker network connect golang_network mongoserver1

Setelah itu, network bisa di check lewat inspect command, dan hasilnya:
"Networks": {
    "golang_network": {...}
}

Docker Compose adalah satu set konfigurasi untuk automasi container dan network.
Karena membuatnya satu-persatu akan repot, ada kemungkinan salah dan memakan waktu.

check docker compose version yang ada di system:
docker compose version

untuk check setiap perintah di docker compose:
docker compose
atau
docker compose --help

untuk me-running semua (Create dan start containers)
docker compose up
docker compose up -d (dettached mode)
	detatched mode akan menjalankan compose di belakang layar jadi kita gak perlu nungguin terminalnya.

Hati-hati menggunakan down, terutama dengan container database, karena akan menghapus total
docker compose down

Lebih aman stop containernya daripada down, karena tidak menghapus
docker compose stop

untuk memulai yang di stop bisa menggunakan
docker compose start

====================================== Volume ====================================================

Volum adalah solusi untuk membuat persistent data yang bersifat STATEFUL untuk database, sehingga
permanent data tidak akan hilang ketika container di stop atau di remove

Melihat semua perintah volume
docker volume --help

Membuat volume baru
docker volume create mongo_data

Set volume ke path dari databasenya
docker container create --name mongoserver1 -p 27017:27017 
	-v mongo_data:/data/db 
	mongo:latest

-v untuk volume dan :/data/db adalah lokasi pathnya, ini harus di selidiki di setiap DBMS

Volume totaly di manage sama Docker dan kita gak bisa lihat langsung isinya.
Tapi Bind Mounts bisa.

Contoh bind mounts:
docker container create --name mongoserver1 -p 27017:27017 
	-v /Users/Boby/Desktop/MyData:/data/db 
	mongo:latest

/Users/Boby/Desktop/MyData adalah absolute path HDD saya.
Posisinya persis menggantikan nama volume

===================================== Membersihkan sampah ==========================================

Melisting seluruh images, containers volumes dan cache yang terdapat di system:
docker system df

Menghapus semua container yang tidak dijalankan
docker container prune

Menghapus semua network yang tak terpakai
docker network prune

Menghapus seluruh volume yang tidak terpakai
docker volume prune

untuk menghapus dangling image:
docker image prune

(Dangling image artinya bukan image yang tidak ada containernya (unused image), dangling image artinya image
dia unused dan tidak memiliki nama dan tag. <none>:<none>)

untuk menghapus image yang unused atau tidak terpakai:
docker image prune -a

untuk menghapus banyak hal:
docker system prune

WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container
  - all dangling images
  - unused build cache

docker system prune -a
WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container
  - all images without at least one container associated to them
  - all build cache

docker system prune -a --volumes
WARNING! This will remove:
  - all stopped containers
  - all networks not used by at least one container
  - all anonymous volumes not used by at least one container
  - all images without at least one container associated to them
  - all build cache

(Note: Hati-hati penghapus volumes karena ada database di sana)

jalankan java
java -jar target/basiliskSB-5.0.0.jar