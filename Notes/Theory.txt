===========================  Theory  =================================

Jaman dulu ada Virtual Machine Manager / Hypervisor

Native Hypervisor: Di instal langsung di atas hardware.
Contoh: VMware ESXi, Microsoft Hyper-V (Server mode), Xen, KVM (di Linux server)

Hosted Hypervisor: Di install diatas OS lain.
VirtualBox, VMware Workstation/Player, Parallels Desktop (Mac), Qemu

Infrastructure / Platform Implementers & Operators Job Title:

System Admin (Sys Admin)
Tech:
-Bare-metal servers
-Virtual Machines (Hypervisor)
-Physical networking
-Manual provisioning
-Container hampir tidak digunakan.
Responsibilities:
-Install OS
-Configure server
-Patch & update
-User management
-Backup & recovery
-Uptime & hardware health
-Fokus stability & availability
Skill set:
-Linux/Windows internals
-Networking (TCP/IP, DNS)
-Storage
-Hypervisor (VMware, Hyper-V)
-Bash scripting

System Operations (Sys Ops)
Tech:
-Virtual Machines (still dominant)
-Hypervisor
-Early automation (Ansible, Puppet)
-Cloud IaaS (EC2, GCE)
-Containers mulai muncul tapi belum utama.
Responsibilities:
-Automate server provisioning
-Monitor systems
-Capacity planning
-Incident response
-Fokus:operational efficiency
Skill set tambahan:
-Automation tools
-Monitoring (Nagios, Zabbix)
-Cloud basics
-Scripting lebih kuat

Development and Operations (Dev Ops)
Tech:
-Containers (Docker)
-Container orchestration (K8s)
-CI/CD pipelines
-Cloud managed services
-Hypervisor masih ada, tapi di layer bawah (cloud provider).
Responsibilities:
-Build deployment pipelines
-Infrastructure as Code
-Collaboration Dev + Ops
-Release automation
-Scalability
-Fokus delivery speed + reliability
Skill set:
-Docker, Kubernetes
-CI/CD
-Git workflows
-Cloud services
-Observability

Development, Security and Operations (Dev Sec Ops)
Tech:
-Everything in DevOps
-Image scanning
-Secret management
-Policy enforcement
-Zero Trust
Responsibilities:
-Shift-left security
-Secure pipelines
-Compliance automation
-Threat modeling
-Fokus: secure by default

Virtualization digunakan untuk seperate deployment dan implementation supaya semua gak campur jadi satu,
tapi dengan cost setiap Virtual Machine harus ada OS masing2 yang membuat server jadi berat.

WSL (Windows Subsystem for Linux): Cara running Linux Kernel di windows
wsl --update

Kernel ada core dari OS, yang langsung bersentuhan dengan Hardware dan App.
Compatibility App semua dikarenakan kernelnya.

Di containerization, sangat memungkinkan:
Di server windows (sudah ada windows kernel) -> jalankan container windows
Di server windows -> jalankan linux kernel -> jalankan container linux
Di server linux (sudah ada linux kernel) -> jalankan container linux
Kernel dan container harus sama.

Docker Client:
	Docker Command dan Docker Desktop

Docker Server / Docker_Host / Docker_Daemon
	Docker Image / Package : paket aplikasi siap jalan (dependency, library, konfigurasi)
	Docker Container: Container ada images yang dirun. (Hasil instantiate dari image, bisa dalam keadaan diam juga)
		Bisa jadi 1 image di run beberapa kali sehingga menghasilkan lebih dari 1 containers.

Docker Registry (Image registry)

Kalau mau install docker desktop di Fedora, pastikan:
1. Install GNOME terminal
2. Sudah install KVM (Kernel Virtual machine)
3. Install Docker Engine
2. Sudah install GPG key management store

In real-world Docker/DevOps practice: the application and the database run in separate containers, built from different images.
Putting both in one container is technically possible, but considered bad design.

Docker follows this rule:
One container = one main responsibility (one process/service).

So typically:
One container â†’ your backend app (Spring Boot, Node, etc.)
One container â†’ database (MongoDB, MySQL, PostgreSQL, etc.)
They communicate over a virtual network.

Ketika membuat tag pada image:
image tidak benar-benar â€œdiduplikasiâ€
Docker tidak membuat image baru secara fisik.

Yang dibuat hanyalah:
ğŸ‘‰ pointer (label) baru ke image yang sama di disk.
Ibarat:
Satu file, tapi punya dua nama.

Docker NAT (Network Address Translation)
It is a networking mechanism that:
rewrites destination IP/port so traffic can jump between different networks.

Perbedaan container command stop dan kill.
Container adalah linux process dan bisa dikendalikan oleh signal, contoh yang umum:
| Signal       | Meaning                  | Can handle? |
| ------------ | ------------------------ | ----------- |
| SIGTERM (15) | Please terminate cleanly | âœ… yes       |
| SIGINT (2)   | Interrupt (Ctrl+C)       | âœ… yes       |
| SIGKILL (9)  | Die immediately          | âŒ no        |
| SIGSTOP      | Pause                    | âŒ no        |

Apa itu docker stop:
1. Sends SIGTERM to main process (PID 1 in container)
2. Waits (default 10 seconds)
3. If still alive â†’ sends SIGKILL

SIGTERM akan membiarkan aplikasi:
â€¢ close DB connections
â€¢ flush logs
â€¢ finish requests
â€¢ shutdown safely

Apa itu docker kill:
1. Send SIGKILL langsung

Bisa:
âŒ corrupt data
âŒ break transactions
âŒ leave files half-written

Kalau kill itu kasar dan tidak best practice, di situasi apa harus dipakai?
Not response dan di force stop

============================== CONTAINER DIRECTORY SYSTEM ============================================

ğŸ“¦ Container punya filesystem sendiri (seperti mini Linux)

Saat image dibuat dan container dijalankan, Docker membuat:
/
â”œâ”€ bin
â”œâ”€ etc
â”œâ”€ usr
â”œâ”€ var
â”œâ”€ app   â† ini nanti bisa kamu buat

Ini bukan folder di Windows / Linux host kamu.
Ini adalah filesystem virtual milik container.


===================== EXEC vs SHELL FORM =====================================

1. Exec form (JSON / array)
CMD ["java", "-jar", "/app/demo-docker.jar"]

Docker menjalankan program langsung.

âœ… Kelebihan

âœ” Aplikasi jadi PID 1 (langsung dikontrol Docker)
âœ” SIGTERM, SIGINT diterima dengan benar (graceful shutdown bekerja)
âœ” Tidak ada shell perantara
âœ” Lebih ringan & stabil
âœ” Standar untuk production

âŒ Kekurangan

âœ– Tidak ada shell features:
tidak bisa &&
tidak ada pipe |
tidak ada $VAR expansion (kecuali ENTRYPOINT trick)

2. Shell form
CMD java -jar /app/demo-docker.jar

Docker menjalankan:
/bin/sh -c "java -jar /app/demo-docker.jar"

âœ… Kelebihan

âœ” Bisa pakai:
environment variable ($PORT)
chaining (&&)
redirect (>)

âœ” Mudah untuk scripting cepat

âŒ Kekurangan (penting)
â— Aplikasi bukan PID 1
â— Signal sering tidak sampai ke aplikasi
â— docker stop bisa lambat / paksa kill
â— Risiko zombie process
â— Tidak ideal untuk service jangka panjang

| Aspek           | Exec form    | Shell form       |
| --------------- | ------------ | ---------------- |
| PID 1           | App langsung | shell            |
| Signal handling | âœ… bagus      | âŒ buruk          |
| Performance     | lebih baik   | sedikit overhead |
| Shell feature   | âŒ            | âœ…                |
| Production use  | â­ yes        | âš ï¸ rarely        |